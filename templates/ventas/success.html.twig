{% extends 'base.html.twig' %}

{% block title %}Venta Registrada{% endblock %}

{% block body %}
<div class="page-inner">
    <div class="d-flex align-items-center justify-content-center" style="min-height: 60vh;">
        <div class="text-center">
            <i class="fas fa-check-circle fa-4x text-success mb-3"></i>
            <h3 class="fw-bold">¡Venta registrada con éxito!</h3>
            <p class="text-muted">Generando y descargando recibo...</p>
            <p class="text-muted">Serás redirigido en unos segundos.</p>
        </div>
    </div>
</div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Disparar la descarga del recibo
            window.location.href = '{{ path('app_ventas_receipt', {'id': venta.id}) }}';

            // Después de 2 segundos, redirigir al listado de ventas
            setTimeout(function() {
                window.location.href = '{{ path('app_ventas_index') }}';
            }, 2000); // 2000 milisegundos = 2 segundos
        });
    </script>
{% endblock %}